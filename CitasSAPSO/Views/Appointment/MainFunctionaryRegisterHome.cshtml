

@{
    ViewData["Title"] = "MainFunctionaryRegister";
}
<link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>
<script src="https://unpkg.com/boxicons@latest/dist/boxicons.js"></script>

<form asp-controller="Appointment" asp-action="MainFunctionaryRegisterHome" method="post">
    <div class="row align-items-start">
        <div class="col">
            <p class="text-success">Datos Personales</p>
            <div class="row functionary-register">
                <label class="col-sm-6 control-label small" for="identification">Numero de identificacion:</label>
                <input class="col-sm-4 form-control form-control-sm" type="text" id="cedula" name="cedula">
                <div class="col-sm-2">
                    <a class="btn btn-success" id="cleanPlace" name="cleanPlace" onclick="searchFunctionary()"><i class='bx bx-search'></i></a>
                </div>
                    @*foreach (CitasSAPSO.Models.FunctionaryModels process in ViewBag.process)
        {
            <input class="col-sm-4 form-control form-control-sm" type="text" id="cedula" name="cedula" value=@process.Cedula>
        }*@
                </div>
            <div class="row functionary-register">
                <label class="col-sm-6 control-label small" for="name">Nombre:</label>
                <input class="col-sm-4 form-control form-control-sm" type="text" id="name" name="name">
            </div>
            <div class="row functionary-register">
                <label class="col-sm-6 control-label small" for="firstLastName">Primer Apellido:</label>
                <input class="col-sm-4 form-control form-control-sm" type="text" id="firstLastName" name="firstLastName">
            </div>
            <div class="row functionary-register">
                <label class="col-sm-6 control-label small" for="secondLastName">Segundo Apellido:</label>
                <input class="col-sm-4 form-control form-control-sm" type="text" id="secondLastName" name="secondLastName">
            </div>
            <div class="row functionary-register">
                <label class="col-sm-6 control-label small" for="personalPhone">Teléfono Personal:</label>
                <input class="col-sm-4 form-control form-control-sm" type="text" id="personalPhone" name="personalPhone">
            </div>
            <div class="row functionary-register">
                <label class="col-sm-6 control-label small" for="housePhone">Teléfono de habitación:</label>
                <input class="col-sm-4 form-control form-control-sm" type="text" id="housePhone" name="roomPhone">
            </div>
            <div class="row functionary-register">
                <label class="col-sm-6 control-label small" for="birthday">Fecha de nacimineto</label>
                <input type="date" placeholder="dd-mm-yyyy" class="col-sm-4 form-control form-control-sm" id="birthday" name="birthday" />
            </div>
            <div class="row functionary-register">
                <label class="col-sm-6 control-label small" for="gender">Sexo</label>
                <select class="col-sm-5 custom-select custom-select-sm" id="gender" name="gender">
                    <option value="M">Masculino</option>
                    <option value="F">Femenino</option>
                </select>
            </div>
            <div class="row functionary-register">
                <label class="col-sm-6 control-label small" for="scholarship">Escolaridad</label>
                <select class="col-sm-5 custom-select custom-select-sm" id="scholarship" name="scholarship">
                    <option value="Primaria">Primaria</option>
                    <option value="Segundaria">Segundaria</option>
                </select>
            </div>
            <div class="row functionary-register">
                <label class="col-sm-6 control-label small" for="province">Provincia</label>
                <select class="col-sm-5 custom-select custom-select-sm" id="province" name="province">
                    <option value="san jose">San José</option>
                    <option value="heredia">Heredia</option>
                    <option value="cartago">Cartago</option>
                    <option value="alajuela">Alajuela</option>
                    <option value="puntarenas">Puntarenas</option>
                    <option value="guanacaste">Guanacaste</option>
                    <option value="limon">Limón</option>
                </select>
            </div>
            <div class="row functionary-register">
                <label class="col-sm-6 control-label small" for="canton">Cantón</label>
                <select class="col-sm-5 custom-select custom-select-sm" id="canton" name="canton">
                    <option value="Canton1">Canton1</option>
                    <option value="Canton2">Canton2</option>
                    <option value="Canton3">Canton3</option>
                </select>
            </div>
            <div class="row functionary-register">
                <label class="col-sm-6 control-label small" for="district">Distrito</label>
                <select class="col-sm-5 custom-select custom-select-sm" id="district" name="district">
                    <option value="Distrito1">Distrito1</option>
                    <option value="Distrito2">Distrito2</option>
                    <option value="Distrito3">Distrito3</option>
                </select>
            </div>
            <div class="row functionary-register">
                <label class="col-sm-6 control-label small" for="civilStatus">Estado civil:</label>
                <select class="col-sm-5 custom-select custom-select-sm" id="civilStatus" name="civilStatus">
                    <option value="Casado(a)">Casado(a)</option>
                    <option value="Divorsiado(a)">Divorsiado(a)</option>
                    <option value="Viudo(a)">Viudo(a)</option>
                    <option value="Soltero(a)">Soltero(a)</option>
                </select>
            </div>
            <div class="row functionary-register">
                <label class="col-sm-6 control-label small" for="address">Dirección:</label>
                <textarea class="col-sm-6 form-control form-control-sm" id="address" name="address" rows="1"></textarea>
            </div>
        </div>
        <div class="col">
            <br />


            <div class="row functionary-register">

                <input type="hidden" class="col-sm-4 form-control form-control-sm" value="1" id="assistance" name="assistance">

            </div>

        </div>
        <div class="col">
            <p class="text-success">Datos Laborales</p>
            <div class="row functionary-register">
                <label class="col-sm-6 control-label small" for="area">Área</label>
                <select class="col-sm-5 custom-select custom-select-sm" id="area" name="areaID">
                    <!--Se cargar desde javaScript-->
                    @foreach (CitasSAPSO.Models.CatalogueModels areas in ViewBag.areas)
                    {
                        <option value="@areas.ID">@areas.Name</option>

                    }
                </select>
            </div>
            <div class="row functionary-register">
                <label class="col-sm-6 control-label small" for="office">Oficina</label>
                <select class="col-sm-5 custom-select custom-select-sm" id="office" name="officeID">
                    @foreach (CitasSAPSO.Models.CatalogueModels offices in ViewBag.offices)
                    {
                        <option value="@offices.ID">@offices.Name</option>

                    }

                </select>
            </div>
            <div class="row functionary-register">
                <label class="col-sm-6 control-label small" for="place">Puesto</label>
                <select class="col-sm-5 custom-select custom-select-sm" id="place" name="placeID">
                    @foreach (CitasSAPSO.Models.CatalogueModels places in ViewBag.places)
                    {
                        <option value="@places.ID">@places.Name</option>

                    }
                </select>
            </div>
            <div class="row functionary-register">
                <label class="col-sm-6 control-label small" for="admissionDate">Fecha de ingreso</label>
                <input type="date" placeholder="dd-mm-yyyy" class="col-sm-4 form-control form-control-sm" id="admissionDate" name="admissionDate" />
            </div>
            <div class="row functionary-register">
                <label class="col-sm-6 control-label small" for="officePhone">Teléfono Oficina:</label>
                <input class="col-sm-4 form-control form-control-sm" type="text" id="oficePhone" name="oficePhone">
            </div>
            <div class="row functionary-register">
                <label class="col-sm-6 control-label small" for="email">Correo electrónico:</label>
                <input class="col-sm-4 form-control form-control-sm" type="email" id="mail" name="mail">
            </div>
            <p class="text-success">Aplica si el puesto lo amerita</p>
            <div class="row functionary-register">
                <label class="col-sm-6 control-label small" for="plateCode">Código de placa:</label>
                <select class="col-sm-5 custom-select custom-select-sm" id="idPlaca" name="idPlaca">
                    <option value="Codigo1">Código1</option>
                    <option value="Codigo2">Código2</option>
                    <option value="Codigo3">Código3</option>
                </select>
            </div>
            <div class="row functionary-register">
                <label class="col-sm-6 control-label small" for="expDate">Fecha de vecimiento portación de armas</label>
                <input type="date" placeholder="dd-mm-yyyy" class="col-sm-4 form-control form-control-sm" id="PortationExpirationDay" name="PortationExpirationDay" />
            </div>
            <br />

            <div class="row justify-content-end">
                <!--Contorlar con Sessión-->
                <!----
    <a class="btn btn-success btn-sm" asp-controller="Home" asp-action="Index">Atrás</a>
    <a class="btn btn-success btn-sm" asp-controller="Administrator" asp-action="AdministratorDashboard">Atrás(Admin)</a>

    <a class="btn btn-success btn-sm" style="margin-left: 5px;" asp-controller="Home" asp-action="ScheduleDates">Siguiente</!-->
                @Html.ActionLink("Atrás", "Index", "Appointment", null, new { @class = "btn btn-success btn-sm" })
                <input class="btn btn-success btn-sm" type="submit" id="siguiente" name="siguiente" value="Siguiente" style="margin-left: 5px;" />





                @*Html.ActionLink("Siguiente", "ScheduleDatesHome", "Home", null, new { @class = "btn btn-success btn-sm" })*@

            </div>



        </div>

    </div>

</form>
<script>
    window.onload = function () {
        loadFunctionaryRegister();
    }

    function searchFunctionary() {
        $.ajax(
            {
                data: { identification: $('#cedula').val() },
                url: '/User/LoadFunctionary',
                type: 'post',               
                beforeSend: function () {
                    $("#messageSpanId").html("Procesando, espere por favor ...");
                },
                success: function (response) {
                    data = JSON.parse(response);
                    console.log(data);
                    $('#name').val(data[0].Name);
                    $('#firstLastName').val(data[0].FirstLastName);
                    $('#secondLastName').val(data[0].SecondLastName);
                    $('#personalPhone').val(data[0].PersonalPhone);
                    $('#housePhone').val(data[0].RoomPhone);
                    $('#birthday').val(data[0].Birthday); 
                    $('#gender').val(data[0].Gender);
                    $('#scholarship').val(data[0].Scholarship);
                    $('#province').val(data[0].Province);
                    $('#canton').val(data[0].Canton);
                    $('#district').val(data[0].District);
                    $('#civilStatus').val(data[0].CivilStatus);
                    $('#address').val(data[0].Address);
                    $('#assistance').val(data[0].Assistance);
                    $('#area').val(data[0].AreaID);
                    $('#office').val(data[0].OfficeID);
                    $('#place').val(data[0].PlaceID);
                    $('#admissionDate').val(data[0].AdmissionDate );
                    $('#oficePhone').val(data[0].OficePhone);
                    $('#mail').val(data[0].Mail);
                    $('#idPlaca').val(data[0].IdPlaca);
                    $('#PortationExpirationDay').val(data[0].PortationExpirationDay);
                }
            }
        );
    }
</script>